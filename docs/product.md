# OctoRill 产品说明

OctoRill 是一个 GitHub 信息聚合与阅读界面：提供一个 **Releases 信息流**（类似 GitHub dashboard 的阅读体验），并用 AI 自动翻译成用户语言（当前默认中文）；同时提供 **Release 日报** 与 **Inbox（GitHub Notifications）** 的快捷入口。所有可操作入口最终都会跳转回 GitHub 完成操作。

## 核心体验

- **信息流（Feed）**：仅展示 Releases，按时间倒序排列，支持无限滚动加载更多。
- **AI 自动翻译**：Release 条目在进入视口时触发翻译并缓存；AI 未配置或翻译失败时回退显示原文。
- **Release 日报**：根据固定时间边界生成“昨日更新”日报，由 AI 输出 Markdown。
- **Inbox 快捷入口**：把 GitHub Notifications 抄一份到侧栏，提供快速跳转入口。

## 页面结构（Web）

### Tabs：全部 / Releases / 日报 / Inbox

页面整体采用**固定左右两栏**布局：

- **左侧主列**：根据 Tab 展示对应内容（Releases Feed / 日报 / Inbox 列表）。
- **右侧侧栏**：展示“其他内容”，在看 Feed（全部 / Releases）时包含：
  - **日报列表**（最近几天）
  - **日报内容渲染区**（可切换日期、可手动生成）
  - **Inbox 快捷入口**
  在「日报」Tab 下：右侧包含「日报列表 + Inbox 快捷入口」；在「Inbox」Tab 下：右侧保留 **Inbox 快捷入口** 作为常驻入口。

Tab 语义：

- **全部（聚合）**：左侧展示 Releases 信息流；右侧展示「日报（列表+渲染）+ Inbox 快捷入口」。
- **Releases**：左侧仅展示 Release 信息流（Feed）；右侧同样展示「日报（列表+渲染）+ Inbox 快捷入口」。
- **日报**：左侧展示日报内容查看（并支持手动生成）；右侧展示「日报列表 + Inbox 快捷入口」。
- **Inbox**：左侧展示通知列表（用于查看与跳转），不进入 Feed；右侧仍展示 Inbox 快捷入口。

### 主列：Releases 信息流（无限滚动）

信息流条目仅包含一种：

1) **Release 条目**
- 展示：仓库名、发布版本（tag 或 release name）、发布时间、（可选）中文翻译标题与发布说明译文（摘录）
- 操作：点击“在 GitHub 打开”跳转到对应 Release 页面（新标签页）

### 日报（独立 Tab）

- 时间窗口：以 `AI_DAILY_AT_LOCAL` 设定的本地时间（例如 `08:00`）为边界，
  窗口为「昨日 08:00（本地）→ 今日 08:00（本地）」。
- 内容：由 AI 生成 Markdown（聚焦 Releases，不包含外部链接）；系统会补齐内部详情链接。
- 用途：快速扫一眼昨天有哪些更新、哪些需要跟进。
- 链接完整性：系统会对日报中的 `release_id` 内部链接做精确匹配校验与自动补齐，
  防止 `12/123` 前缀冲突导致误判。

### 右侧侧栏：Inbox 快捷入口

- 展示最近的通知条目（优先未读）。
- 用途：作为快速入口方便用户查看；不试图替代 GitHub 的完整通知工作流。

## AI 翻译策略

- 默认语言：中文（`zh-CN`）。
- 触发方式：**懒加载自动**（条目进入视口时触发），并写入本地缓存。
- 回退策略：
  - 未配置 AI（缺少 `AI_API_KEY`）：直接显示原文，不显示“翻译中”假状态。
  - AI 调用失败：显示原文，并允许用户重试。
- 输出要求：保留版本号/仓库名/代码片段/专有名词，不做过度“意译”。

## 数据来源与同步

- 登录方式：GitHub OAuth。
- 本地存储：SQLite（默认 `./.data/octo-rill.db`）。
- 同步数据：
  - Starred repos（用于个性化可见范围）
  - Releases（共享事实数据；用于信息流、日报与详情）
  - Notifications（用于 Inbox 列表与侧栏快捷入口）

语义边界：

- **Star 只影响当前列表展示范围**（Feed / Releases / 日报候选）。
- **Release 详情与详情翻译按 `release_id` 可读**，不依赖当前是否仍在 Star 列表中。

## 非目标（本项目不做什么）

- 不做完整 GitHub 客户端：不在站内处理评论、合并、标记已读等操作。
- 不做多语言设置页：当前固定中文。
- 不做后台自动同步：仍以用户手动触发 Sync 为主（定时器仅负责日报生成）。
